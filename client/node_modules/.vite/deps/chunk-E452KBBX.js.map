{
  "version": 3,
  "sources": ["../../react-select/dist/useAsync-ba7c6b77.esm.js"],
  "sourcesContent": ["import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\r\nimport _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\r\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray';\r\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\r\nimport { useRef, useState, useEffect, useCallback } from 'react';\r\nimport { L as handleInputChange } from './index-a301f526.esm.js';\r\n\r\nvar _excluded = [\"defaultOptions\", \"cacheOptions\", \"loadOptions\", \"options\", \"isLoading\", \"onInputChange\", \"filterOption\"];\r\nfunction useAsync(_ref) {\r\n  var _ref$defaultOptions = _ref.defaultOptions,\r\n    propsDefaultOptions = _ref$defaultOptions === void 0 ? false : _ref$defaultOptions,\r\n    _ref$cacheOptions = _ref.cacheOptions,\r\n    cacheOptions = _ref$cacheOptions === void 0 ? false : _ref$cacheOptions,\r\n    propsLoadOptions = _ref.loadOptions;\r\n    _ref.options;\r\n    var _ref$isLoading = _ref.isLoading,\r\n    propsIsLoading = _ref$isLoading === void 0 ? false : _ref$isLoading,\r\n    propsOnInputChange = _ref.onInputChange,\r\n    _ref$filterOption = _ref.filterOption,\r\n    filterOption = _ref$filterOption === void 0 ? null : _ref$filterOption,\r\n    restSelectProps = _objectWithoutProperties(_ref, _excluded);\r\n  var propsInputValue = restSelectProps.inputValue;\r\n  var lastRequest = useRef(undefined);\r\n  var mounted = useRef(false);\r\n  var _useState = useState(Array.isArray(propsDefaultOptions) ? propsDefaultOptions : undefined),\r\n    _useState2 = _slicedToArray(_useState, 2),\r\n    defaultOptions = _useState2[0],\r\n    setDefaultOptions = _useState2[1];\r\n  var _useState3 = useState(typeof propsInputValue !== 'undefined' ? propsInputValue : ''),\r\n    _useState4 = _slicedToArray(_useState3, 2),\r\n    stateInputValue = _useState4[0],\r\n    setStateInputValue = _useState4[1];\r\n  var _useState5 = useState(propsDefaultOptions === true),\r\n    _useState6 = _slicedToArray(_useState5, 2),\r\n    isLoading = _useState6[0],\r\n    setIsLoading = _useState6[1];\r\n  var _useState7 = useState(undefined),\r\n    _useState8 = _slicedToArray(_useState7, 2),\r\n    loadedInputValue = _useState8[0],\r\n    setLoadedInputValue = _useState8[1];\r\n  var _useState9 = useState([]),\r\n    _useState10 = _slicedToArray(_useState9, 2),\r\n    loadedOptions = _useState10[0],\r\n    setLoadedOptions = _useState10[1];\r\n  var _useState11 = useState(false),\r\n    _useState12 = _slicedToArray(_useState11, 2),\r\n    passEmptyOptions = _useState12[0],\r\n    setPassEmptyOptions = _useState12[1];\r\n  var _useState13 = useState({}),\r\n    _useState14 = _slicedToArray(_useState13, 2),\r\n    optionsCache = _useState14[0],\r\n    setOptionsCache = _useState14[1];\r\n  var _useState15 = useState(undefined),\r\n    _useState16 = _slicedToArray(_useState15, 2),\r\n    prevDefaultOptions = _useState16[0],\r\n    setPrevDefaultOptions = _useState16[1];\r\n  var _useState17 = useState(undefined),\r\n    _useState18 = _slicedToArray(_useState17, 2),\r\n    prevCacheOptions = _useState18[0],\r\n    setPrevCacheOptions = _useState18[1];\r\n  if (cacheOptions !== prevCacheOptions) {\r\n    setOptionsCache({});\r\n    setPrevCacheOptions(cacheOptions);\r\n  }\r\n  if (propsDefaultOptions !== prevDefaultOptions) {\r\n    setDefaultOptions(Array.isArray(propsDefaultOptions) ? propsDefaultOptions : undefined);\r\n    setPrevDefaultOptions(propsDefaultOptions);\r\n  }\r\n  useEffect(function () {\r\n    mounted.current = true;\r\n    return function () {\r\n      mounted.current = false;\r\n    };\r\n  }, []);\r\n  var loadOptions = useCallback(function (inputValue, callback) {\r\n    if (!propsLoadOptions) return callback();\r\n    var loader = propsLoadOptions(inputValue, callback);\r\n    if (loader && typeof loader.then === 'function') {\r\n      loader.then(callback, function () {\r\n        return callback();\r\n      });\r\n    }\r\n  }, [propsLoadOptions]);\r\n  useEffect(function () {\r\n    if (propsDefaultOptions === true) {\r\n      loadOptions(stateInputValue, function (options) {\r\n        if (!mounted.current) return;\r\n        setDefaultOptions(options || []);\r\n        setIsLoading(!!lastRequest.current);\r\n      });\r\n    }\r\n    // NOTE: this effect is designed to only run when the component mounts,\r\n    // so we don't want to include any hook dependencies\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  var onInputChange = useCallback(function (newValue, actionMeta) {\r\n    var inputValue = handleInputChange(newValue, actionMeta, propsOnInputChange);\r\n    if (!inputValue) {\r\n      lastRequest.current = undefined;\r\n      setStateInputValue('');\r\n      setLoadedInputValue('');\r\n      setLoadedOptions([]);\r\n      setIsLoading(false);\r\n      setPassEmptyOptions(false);\r\n      return;\r\n    }\r\n    if (cacheOptions && optionsCache[inputValue]) {\r\n      setStateInputValue(inputValue);\r\n      setLoadedInputValue(inputValue);\r\n      setLoadedOptions(optionsCache[inputValue]);\r\n      setIsLoading(false);\r\n      setPassEmptyOptions(false);\r\n    } else {\r\n      var request = lastRequest.current = {};\r\n      setStateInputValue(inputValue);\r\n      setIsLoading(true);\r\n      setPassEmptyOptions(!loadedInputValue);\r\n      loadOptions(inputValue, function (options) {\r\n        if (!mounted) return;\r\n        if (request !== lastRequest.current) return;\r\n        lastRequest.current = undefined;\r\n        setIsLoading(false);\r\n        setLoadedInputValue(inputValue);\r\n        setLoadedOptions(options || []);\r\n        setPassEmptyOptions(false);\r\n        setOptionsCache(options ? _objectSpread(_objectSpread({}, optionsCache), {}, _defineProperty({}, inputValue, options)) : optionsCache);\r\n      });\r\n    }\r\n  }, [cacheOptions, loadOptions, loadedInputValue, optionsCache, propsOnInputChange]);\r\n  var options = passEmptyOptions ? [] : stateInputValue && loadedInputValue ? loadedOptions : defaultOptions || [];\r\n  return _objectSpread(_objectSpread({}, restSelectProps), {}, {\r\n    options: options,\r\n    isLoading: isLoading || propsIsLoading,\r\n    onInputChange: onInputChange,\r\n    filterOption: filterOption\r\n  });\r\n}\r\n\r\nexport { useAsync as u };\r\n"],
  "mappings": "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",
  "names": ["options"]
}
